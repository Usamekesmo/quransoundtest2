<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฑููู ุงูุญูุธ ุงููุชูุฏู</title>
    
    <!-- ุฑุงุจุท ูููู ุงูุฃููุงุท CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- ููุชุจุฉ ุฎุงุฑุฌูุฉ ูุฅูุดุงุก ุงูุตูุฑ (ูููุฉ ูุจุทุงูุฉ ุงูุญุงูุธ) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

    <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
    <div id="start-screen" class="container">
        <h1>ุฑููู ุงูุญูุธ ุงููุชูุฏู</h1>
        <p>ุฃููุงู ุจู <strong id="welcome-name"></strong>! <span id="user-title" style="color: var(--primary-color); font-weight: bold;"></span></p>
        
        <div id="motivation-features">
            <div class="feature-box">
                <div class="icon">๐ฅ</div>
                <p><span id="streak-counter">0</span></p>
                <span>ุณูุณูุฉ ููููุฉ</span>
            </div>
            <div class="feature-box" style="flex-grow: 1; padding: 0 10px;">
                <div id="xp-text">ุงููุณุชูู 1 (0/100)</div>
                <div id="xp-bar-container"><div id="xp-bar"></div></div>
                <span>ููุงุท ุงูุฎุจุฑุฉ</span>
            </div>
            <div class="feature-box">
                <div class="icon">๐</div>
                <p><span id="achievements-counter">0</span></p>
                <span>ุงูุฅูุฌุงุฒุงุช</span>
            </div>
        </div>

        <button id="smart-review-btn" class="button-style" style="background-color: var(--secondary-color); color: var(--primary-dark);">๐ ุงุจุฏุฃ ุงููุฑุงุฌุนุฉ ุงูุฐููุฉ</button>
        
        <hr style="margin: 20px 0;">

        <input type="text" id="userName" placeholder="ุฃุฏุฎู ุงุณูู ููุจุฏุก">
        <br>
        <input type="number" id="pageNumber" placeholder="ุฃู ุฃุฏุฎู ุฑูู ุตูุญุฉ (1-604)" min="1" max="604">
        
        <br><br>
        <button id="startButton">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
        <button id="profileButton" class="button-style" style="background-color: #555;">ูููู ุงูุดุฎุตู</button>
        <div id="loader" class="loader hidden"></div>
    </div>

    <!-- ุดุงุดุฉ ุงูููู ุงูุดุฎุตู -->
    <div id="profile-screen" class="container hidden">
        <h2>ูููู ุงูุดุฎุตู: <span id="profileName"></span></h2>
        <button id="share-card-btn">ุดุงุฑู ุจุทุงูุฉ ุงูุญุงูุธ</button>
        <button id="theme-toggle-btn">ุงููุถุน ุงููููู</button>
<div class="settings-item">
    <label for="reciter-select">ุงุฎุชุฑ ุงููุงุฑุฆ ุงูููุถู:</label>
    <select id="reciter-select">
        <!-- ุณูุชู ููุก ูุฐู ุงููุงุฆูุฉ ุจูุงุณุทุฉ ุฌุงูุงุณูุฑูุจุช -->
    </select>
</div>

        <hr>
        <h3>ุฎุฑูุทุฉ ุงูุญูุธ ุงูุญุฑุงุฑูุฉ</h3>
        <div id="hifz-heatmap"></div>
        <hr>
        <div class="profile-grid">
            <div id="progress-tree-container">
                <h4>ุดุฌุฑุฉ ุงูุญูุธ</h4>
                <div id="progress-tree">๐ฑ</div>
                <p><span id="mastered-pages-count">0</span>/604 ุตูุญุงุช ูุชููุฉ</p>
            </div>
            <div>
                <h4>๐ ุฅูุฌุงุฒุงุชู</h4>
                <div id="achievements-container" class="achievements-grid"></div>
            </div>
        </div>
        <hr>
        <h3>๐ ุฅุญุตุงุฆูุงุชู ุงููุชูุฏูุฉ</h3>
        <div id="advanced-stats-container" class="stats-grid"></div>
        <hr>
        <button id="back-to-start-btn">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
    </div>

    <!-- ุดุงุดุฉ ุงูุงุฎุชุจุงุฑ -->
    <div id="quiz-screen" class="container hidden">
        <div id="progress-counter"></div>
        <div id="progress-container"><div id="progress-bar"></div></div>
        <hr>
        <div id="question-area">
            <!-- ุณูุชู ููุก ูุฐู ุงูููุทูุฉ ุจูุงุณุทุฉ ููุงูู ุงูุชุญููู ูุงูุฌุงูุงุณูุฑูุจุช -->
        </div>
        <div id="feedback-area" class="hidden"></div>
        <button id="meaning-btn" class="button-style hidden" style="background-color: #42a5f5;">ุงูุชุดู ุงููุนูู</button>
    </div>

    <!-- ุดุงุดุฉ ูุฑุงุฌุนุฉ ุงูุฃุฎุทุงุก -->
    <div id="error-review-screen" class="container hidden">
        <h2>ูุฑุงุฌุนุฉ ุงูุฃุฎุทุงุก</h2>
        <div id="error-list"></div>
        <button id="show-final-result-button">ุนุฑุถ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</button>
    </div>

    <!-- ุดุงุดุฉ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ -->
    <div id="result-screen" class="container hidden">
        <h2>ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h2>
        <p>ุฃุญุณูุช ูุง <span id="resultName"></span>!</p>
        <p>ูุชูุฌุชู ูู: <span id="finalScore"></span></p>
        <p>+<span id="xp-gained-text"></span> ููุทุฉ ุฎุจุฑุฉ!</p>
        <div id="challenge-link-container">
            <p>ูู ุชุฑูุฏ ุชุญุฏู ุตุฏููุ ุดุงุฑู ูุนู ูุฐุง ุงูุฑุงุจุท!</p>
            <input type="text" id="challenge-link" readonly>
            <button id="copy-challenge-btn">ูุณุฎ ุงูุฑุงุจุท</button>
        </div>
        <br>
        <button onclick="location.reload()">ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุฌุฏูุฏ</button>
    </div>

    <!-- ุงูููุงูุฐ ุงูููุจุซูุฉ (Modals) -->
    <div id="daily-reward-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-daily-modal">&times;</span>
            <div class="icon">๐</div>
            <h2>ููุงูุฃุฉ ุงูููู!</h2>
            <p id="reward-text" style="font-size: 1.2em; font-weight: bold;"></p>
        </div>
    </div>

    <div id="meaning-modal" class="modal">
        <div class="modal-content meaning-modal-content">
            <span class="close-button" id="close-meaning-modal">&times;</span>
            <div id="meaning-content"><div class="loader"></div></div>
        </div>
    </div>

    <!-- ุจุทุงูุฉ ุงูุญุงูุธ (ุนูุตุฑ ูุฎูู ููุชุญููู ุฅูู ุตูุฑุฉ) -->
    <div id="hafiz-card">
        <h2>ุจุทุงูุฉ ุงูุญุงูุธ</h2>
        <h3 id="card-name"></h3>
        <p id="card-title" style="color: var(--primary-color);"></p>
        <div id="card-tree" class="tree"></div>
        <p><strong>ุงููุณุชูู:</strong> <span id="card-level"></span></p>
        <p><strong>ุงูุตูุญุงุช ุงููุชููุฉ:</strong> <span id="card-mastered"></span></p>
        <p><strong>ุงูุฅูุฌุงุฒุงุช:</strong> <span id="card-achievements"></span></p>
        <p style="font-size: 10px; margin-top: 15px;">ุชู ุฅูุดุงุคูุง ุนุจุฑ ุชุทุจูู ุฑููู ุงูุญูุธ ุงููุชูุฏู</p>
    </div>

    <!-- ุงูุชุนุฏูู ุงูููู ููุง: ุฅุถุงูุฉ type="module" -->
    <script src="script.js" type="module"></script>
</body>
</html>